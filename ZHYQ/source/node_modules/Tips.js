var Node = require('famous/core/Node');
var DOMElement = require('famous/dom-renderables/DOMElement');

function Tips(){
	Node.call(this);
	
	this.setSizeMode('relative','absolute')
	 	 .setAbsoluteSize(null,50)
	 	 .setProportionalSize(.9)
	 	 .setAlign(.5)
	 	 .setMountPoint(.5)
	 	 .el = new DOMElement(this,{
	 	 	classes:['bubble_tips']
	 	 })

	this.showing = false;  
}


Tips.prototype = Object.create(Node.prototype);
Tips.prototype.constructor = Tips;

Tips.prototype.open = function(errStr){
	var _this = this;

	this.el
		.setProperty('opacity','1')
		.setContent('<span>'+errStr+'</span>');

	
	if(this.showing){
		return;
	}	

    this.show();

	this.showing = true; 

    setTimeout(function(){
		_this.close();
	},1000);
	

	return false;
}

Tips.prototype.close = function(){
	this.el.setProperty('opacity','0')
		   .setProperty('transition','all .3s ease-in'); 
    
    setTimeout( function(){
		this.hide();
		this.showing = false; 
	}.bind( this ),300 );
}

var Tip = new Tips();
module.exports = Tip;