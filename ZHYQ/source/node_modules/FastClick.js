function FastClick() {

      var clickThreshold = 300;
      var clickWindow = 500;
      var potentialClicks = {};
      var recentlyDispatched = {};
      var _now = Date.now;





      document.body.addEventListener('touchstart', function(event) {
          var timestamp = _now();
          for (var i = 0; i < event.changedTouches.length; i++) {
              var touch = event.changedTouches[i];
              potentialClicks[touch.identifier] = timestamp;
          }
      });

      document.body.addEventListener('touchmove', function(event) {
          for (var i = 0; i < event.changedTouches.length; i++) {
              var touch = event.changedTouches[i];
              delete potentialClicks[touch.identifier];
          }
      });

      document.body.addEventListener('touchend', function(event) {
          var currTime = _now();
          for (var i = 0; i < event.changedTouches.length; i++) {
              var touch = event.changedTouches[i];
              var startTime = potentialClicks[touch.identifier];
              if (startTime && currTime - startTime < clickThreshold) {
                        var eventAttr = {'screenX':0,
                                          'screenY':0,
                                          'clientX':0,
                                          'clientY':0,
                                          'ctrlKey':0,
                                          'shiftKey':0,
                                          'altKey':0,
                                          'metaKey':0,
                                          'button':0,
                                          'buttons':0,
                                          'pageX':0,
                                          'pageY':0,
                                          'x':0,
                                          'y':0,
                                          'offsetX':0,
                                          'offsetY':0
                                          
                            };
                        
                  var clickEvt = new window.CustomEvent('click', {
                                          'bubbles': true,
                                          'detail': 1});
                  recentlyDispatched[currTime] = event;
                  for (var k in eventAttr) {
                          event[k]?
                          clickEvt[k] = event[k]:
                          clickEvt[k] = eventAttr[k];
                  }     

                  // console.log(11, event,clickEvt);


                  event.target.dispatchEvent(clickEvt);
              }
              //

              delete potentialClicks[touch.identifier];
          }
      });

      document.body.addEventListener('click', function(event) {
          var currTime = _now();
          for (var i in recentlyDispatched) {
              var previousEvent = recentlyDispatched[i];
              if (currTime - i < clickWindow) {
                // console.log(13, event,previousEvent,event instanceof window.MouseEvent , event.target == previousEvent.target);
                //&& event.target == previousEvent.target
                  if (event instanceof window.MouseEvent) {
                    event.stopPropagation();
                     // console.log(14, event,previousEvent);
                    delete recentlyDispatched[i];
                  }
              }
              
          }
      }, true);
    }


module.exports = new FastClick();    